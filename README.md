# Registration / Login / Logout forms 
    Выполняя задание, я использовал реализацию MVC паттерна. 
 

------------


 **Для того что бы перемещать файлы из коревой дериктории, нужно записать путь от корня до файлов проекта в константу FULL_PATH, которая находится в "application/config/config.php". Например define('FULL_PATH', '/your/path/to');.**
 

------------


 Проект состоит из
-  двух контроллеров(AdminController, AuthController).
-  двух моделей(Countries, Users).
-  наборов видов.
## Описание классов-контроллеров
#### Описания методов класса AdminController.php

Данный класс существует для выведения главной страницы администратора

---


В конструкторе класса проверяется, залогиненый ли пользователь, который хочет посетить страницу. И задается базовый шаблон(для админа и для гостя они разные).

Название | Функции                            
---|---
index()| Выполняется вывод страницы администратора.

### Описания методов класса AuthController.php

Класс используется для обработки данных, принятых с форм регестрации и авторизации пользователей.

---


#### Свойства класса
Название | Функции                            
---|---
$login| для хранения логина
$password| для хранения пароля
$email| для хранения имейла
$errors = []| массив ошибок, для вывода во вьюшки
#### Методы класса
Название | Функции                            
---|---
index()| Выводит стартовую вьюшку 
showSingIn()| Выводит вью для авторизации
showSingUp()| Выводит вью для регистрации. Передает массив всех стран мира, которые берет из таблицы в БД. 
login()| метод, который управляет обработкой данных, введенных пользователем при авторизации. Он проверяет получены ли данные вообще, валидны ли данные, и существует ли пользователь, которых хочет войти в систему. Если все проходит успешно, выполняется редирект на страницу администратора, иначе, возвращается страница авторизации с выводом ошибок.
logout()| Уничтожает сессию пользователя.
register()| метод, который управляет обработкой данных, введенных пользователем при регистрации. Проверяет получены ли данные, существует ли пользователь с введенными данными, валидные ли данные. В случае удачи - вызывает метод добавления пользователя в БД,Записывает в сессию данного пользователя, "убивает" данные, которые нужны для заполнения формы в случае некорректного ввода. Перенаправляет на страницу администратора. В случае неудачи, перенаправляет на страницу регистрации, с выведенными ошибками.
addUser($registerData)| Принимает массив регистрационных данных и разделяет их на столбцы и значения, для передачи в метод записи в БД. Добавляет колонку и значение текущего времени.
validateLoginData () | Выполняет валидацию данных для авторизации. Не получает данных, так как они записываются в свойства класса ранее. 
validateRegisterData($registerData)| Принимает массив данных регистрации и выполняет валидацию. 
getRegisterData($post) | Принимает массив данных с формы регистрации. Проверяет на их наличие, cоздает массив для автозаполнения данными полей формы в случае не корректного заполнения пользователем.
getLoginData($post) | Получает массив данных с формы авторизации. Проверяет на их наличие. Устанавливает указан ли имейл или логин.
checkUserExist($registerData = '')| Принимает данные, если они отправлины с формы регистрации, так как для авторизации используются данные, которые хранятся в свойствах класса. Проверяет на существование пользователя в базе данных. А именно на существование введенного имейла, логина или пароля(при авторизации).

---

## Описание классов-моделей. 
#### Описание класса Countries.php

Название свойства\метода | Функция
---|---
$table| Хранит название таблицы, с которой работае данная модель. 
get()| возвращает все данные с таблицы. 
getOneCountry ($id)| Принимает ID записи, которую нужно вернуть.

---

#### Описание класса Users.php

Название свойства\метода | Функция
---|---
$table| Хранит название таблицы, с которой работае данная модель. 
addUser ($columns, $values)| Добавляет пользователя в БД. Получает массивы колонок и значений, которые нужно ввести в БД. А именно данные о пользователе. 
getLoginUser ($login)| Возвращает данные о пользователе, логин которого передается в метод.
getEmailUser ($email)| Возвращает данные о пользователе, имейл которого передается в метод.
getPasswordUser ($pass)| Возвращает данные о пользователе, пароль которого передается в метод.

## Описание View файлов

---

#### Описание Admin View файлов.

Название | Функция
---|---
 index.php|Выводит приветсвие с логином пользователя. Если введен логин при авторзации, то выводит его, если нет, то ищет в БД логин, с введенным имейлом.
 
 

---

#### Описание Auth View файлов.

 Название | Функция
---|---
 index.php| Начальный шаблон, на которой присутствуют кнопки авторизации и регистрации
 login.php| Шаблон с формой авторизации. В этом шаблоне выводятся ошибки при авторизации
 register.php| Шаблон с формой регистрации. В этом шаблоне выводятся ошибки при регистрации
 showSingIn.php| Шаблон с формой авторизации, без вывода ошибок, так как при наличие ошибок выполняется редирект на страницу login.php и уже там выводятся ошибки.
showSingUp.php| Шаблон с формой авторизации, без вывода ошибок, так как при наличие ошибок выполняется редирект на страницу register.php и уже там выводятся ошибки.


---

#### Описание Layout View файлов.

- layout шаблоны придназначены для основного скилета страницы. В них подключаются шаблоны страниц.


---

#### Описание Partials View файлов.

- partials шаблоны придназначены для хранение кода хедера и футера страницы. 










